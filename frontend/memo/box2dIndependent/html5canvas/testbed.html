<html>
    <head>
        <title>Emscripten Box2D demo</title>
        <script type="text/javascript" src="../build/Box2D_v2.3.1_min.js"></script>
        <script type="text/javascript" src="../helpers/embox2d-helpers.js"></script>
        <script type="text/javascript" src="../helpers/embox2d-html5canvas-debugDraw.js"></script>
        <script type="text/javascript" src="embox2d-html5canvas-testbed.js"></script>
        <script type="text/javascript" src="tests/mytest.js"></script>
     
        <!--
        <script type="text/javascript" src="tests/template.js"></script>
        -->
        
        <script type="text/javascript">  
            var Box2D;
            if (!Box2D) Box2D = (typeof Box2D !== 'undefined' ? Box2D : null) || Module; 
            Box2D().then(function(r){
                Box2D = r;
                Module = Box2D;
                if(document.readyState === "complete"){
                    afterDocumentLoaded()
                } else {
                    window.onload = afterDocumentLoaded
                }
            });

            const afterDocumentLoaded = function(){
                using(Box2D, "b2.+");
                init();
                changeTest();
                animate();
            };        
        </script>
        
    </head>
    <body>
        <div style="text-align:center">
            <br>            
            <!--
                If you change the size of the canvas, you'll also need to change 
                the value of 'viewCenterPixel' in embox2d-html5canvas-testbed.js
            -->
            <div style="margin:auto;width:640px;padding:2px;border:1px solid #888;text-align:left">            
            
                <!--<canvas id="canvas" width="480" height="320" tabindex='1'></canvas>-->
                <canvas id="canvas" width="640" height="480" tabindex='1'></canvas>
                <div style="width:636px;padding:2px;background-color:#ddd">
                <div style="text-align:center">
                    <button id="reloadButton" onclick="resetScene();">Reset</button>
                    <button id="pauseButton" onclick="pause();">Pause</button>
                    <button id="stepButton" onclick="step();">Single step</button>
                    (Keyboard: R, P, S)<br>
                    Zoom
                    <button id="zoomInButton" onclick="zoomIn();">+</button>
                    <button id="zoomOutButton" onclick="zoomOut();">-</button>
                    (Keyboard: X, Z)<br>
                    Hold down Shift while moving the mouse to pan (Keyboard: arrow keys)<br>
                    You need to click on the canvas before using the keyboard.<br>
                    <br>
                    Test: <select id="testSelection" onchange="changeTest();">
                        <option value="embox2dTest_myTest">My test</option>
                    </select>
                </div>
                </div>
            </div>        
        </div>
    </body>
</html>

